[{"/home/karl/ca400/2021-ca400-whelak26/src/client/src/index.js":"1","/home/karl/ca400/2021-ca400-whelak26/src/client/src/App.js":"2","/home/karl/ca400/2021-ca400-whelak26/src/client/src/reportWebVitals.js":"3","/home/karl/ca400/2021-ca400-whelak26/src/client/src/getWeb3.js":"4","/home/karl/ca400/2021-ca400-whelak26/src/client/src/components/Header.js":"5","/home/karl/ca400/2021-ca400-whelak26/src/client/src/components/Input.js":"6","/home/karl/ca400/2021-ca400-whelak26/src/client/src/components/CreateProjectPageBody.js":"7","/home/karl/ca400/2021-ca400-whelak26/src/client/src/components/ViewProjectsPageBody.js":"8","/home/karl/ca400/2021-ca400-whelak26/src/client/src/components/ViewProject.js":"9"},{"size":484,"mtime":1611679254296,"results":"10","hashOfConfig":"11"},{"size":6687,"mtime":1611681259638,"results":"12","hashOfConfig":"11"},{"size":362,"mtime":1610367004634,"results":"13","hashOfConfig":"11"},{"size":1144,"mtime":1610895674683,"results":"14","hashOfConfig":"11"},{"size":347,"mtime":1611679254296,"results":"15","hashOfConfig":"11"},{"size":1144,"mtime":1611679254296,"results":"16","hashOfConfig":"11"},{"size":1897,"mtime":1611679254296,"results":"17","hashOfConfig":"11"},{"size":1706,"mtime":1611681845921,"results":"18","hashOfConfig":"11"},{"size":1448,"mtime":1611682124326,"results":"19","hashOfConfig":"11"},{"filePath":"20","messages":"21","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"22"},"lxoapa",{"filePath":"23","messages":"24","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"25","usedDeprecatedRules":"22"},{"filePath":"26","messages":"27","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},{"filePath":"29","messages":"30","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"22"},{"filePath":"31","messages":"32","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"22"},{"filePath":"33","messages":"34","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"22"},{"filePath":"35","messages":"36","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"22"},{"filePath":"37","messages":"38","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"22"},{"filePath":"39","messages":"40","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"/home/karl/ca400/2021-ca400-whelak26/src/client/src/index.js",[],["41","42"],"/home/karl/ca400/2021-ca400-whelak26/src/client/src/App.js",["43","44"],"import React, { Component } from \"react\";\nimport Projects from './contract/Projects.json'\nimport getWeb3 from \"./getWeb3\"\nimport Header from \"./components/Header\"\nimport CreateProjectPageBody from \"./components/CreateProjectPageBody\"\nimport ViewProjectsPageBody from \"./components/ViewProjectsPageBody\"\n\nimport \"./App.css\";\n\n// instantiate web3 + contracts instants\nclass App extends Component {\n  constructor() {\n    super()\n    this.handleButton1Click = this.handleButton1Click.bind(this)\n    this.handleButton2Click = this.handleButton2Click.bind(this)\n    this.createProject = this.createProject.bind(this)\n    this.handleChange = this.handleChange.bind(this)\n    this.retreiveProjects = this.retreiveProjects.bind(this)\n    this.donateToProject = this.donateToProject.bind(this)\n    this.getBalance = this.getBalance.bind(this)\n  }\n  state = {pagenumber:0,\n           projectsMap: null,\n           web3: null,\n           accounts:null,\n           contracts:null,\n           donationAmount: null,\n           doantionKey: null,\n           projectName: \"\",\n           projectDescription: \"\",\n           projectVideoLink: \"\",\n           projectFundingGoal: 0,\n           projectLength: 0};\n\n  // executed once when the app loads\n  componentDidMount = async () => {\n    try {\n      const web3 = await getWeb3();\n      const accounts = await web3.eth.getAccounts();\n\n      const networkId = await web3.eth.net.getId();\n      const deployedNetwork =  Projects.networks[networkId];\n      const instance = new web3.eth.Contract(\n        Projects.abi,\n        deployedNetwork && deployedNetwork.address,\n      );\n\n      this.setState({ web3, accounts, contract: instance });\n    } catch(error) {\n      // catch errors\n      alert(\n        'Failed to load web3, accounts, or contract. check console for details',\n      );\n      console.error(error);\n    }\n  };\n\n  retreiveProjects = async () => {\n    let x =  await this.state.contract.methods.returnProjects().call()\n    for(let i = 0; i < x.length; i ++) {\n      x[i].name = this.state.web3.utils.hexToAscii(x[i].name).replace(/\\0/g, '')\n      x[i].description = this.state.web3.utils.hexToAscii(x[i].description).replace(/\\0/g, '')\n      x[i].videoLink = this.state.web3.utils.hexToAscii(x[i].videoLink).replace(/\\0/g, '')\n      x[i].fundingGoal = this.state.web3.utils.fromWei(x[i].fundingGoal, 'ether')\n      x[i].amountRaised = this.state.web3.utils.fromWei(x[i].amountRaised, 'ether')\n      x[i].projectEndTime = new Date(x[i].projectEndTime * 1000).toLocaleDateString()\n      x[i].key = i\n    }\n\n    this.setState({\n      projectsMap: x\n    })\n  }\n\n  createProject(event) {\n    event.preventDefault()\n    let convertToDate = new Date(this.state.projectLength)\n\n    try {\n\n      let weiValue = this.state.web3.utils.toWei(this.state.projectFundingGoal, 'ether')\n      console.log(this.state.contract)\n      let videoId =  this.state.projectVideoLink.replace('https://youtu.be/', '')\n\n      this.state.contract.methods.createProject(\n        this.state.web3.utils.asciiToHex(this.state.projectName),\n        this.state.web3.utils.asciiToHex(this.state.projectDescription),\n        this.state.web3.utils.asciiToHex(videoId),\n        weiValue,\n        Math.floor(convertToDate.valueOf() / 1000)).send(\n          {from: this.state.accounts[0]})\n          .then(f => alert(\"Project Creation Successful\"))\n          .catch(err => (\n            alert(\"Project Creation Failed! See console for details\"),\n            console.log(err)\n          ))\n    } catch(error) {\n      alert(\"project Creation Failed! See console for details\")\n      console.log(error)\n    }\n  }\n\n  donateToProject = async (projectKey) => {\n\n    try {\n      let weiValue = this.state.web3.utils.toWei(this.state.donationAmount, 'ether')\n\n      await this.state.contract.methods.donateToProject(projectKey).send(\n        {from: this.state.accounts[0],\n         value: weiValue})\n        .then(f => alert(\"Project Donation Successful\"))\n        .catch(err => (\n          alert(\"Project Doantion Failed! See console for details\"),\n          console.log(err)\n        ))\n    } catch(error) {\n      alert(\"Project Donation Failed! See console for details\")\n      console.log(error)\n    }\n\n    this.setState({\n      projectsMap: null\n    })\n    this.retreiveProjects()\n  }\n\n\n  handleButton1Click() {\n    this.setState(prevState => {\n      if(prevState.pagenumber === 0) {\n        return {pagenumber: 1}\n      }\n      return {pagenumber: 0}\n    })\n  }\n\n  handleButton2Click() {\n    this.setState(prevState => {\n      if(prevState.pagenumber === 0) {\n        this.retreiveProjects()\n        return {pagenumber: 2}\n      }\n      return {pagenumber: 0}\n    })\n  }\n\n  handleChange(event) {\n    const {name, value} = event.target\n    this.setState({\n      [name]: value\n    })\n  }\n\n  getBalance() {\n    this.state.contract.methods.getContractBalance().call().then(f => console.log(f))\n  }\n\n  render() {\n\n    if (!this.state.web3) {\n      return <div className=\"App\">\n              <h2>Loading Web3, accounts, and contract......</h2>\n             </div>;\n    }\n    if (this.state.pagenumber === 0) {\n      return (\n        <div className=\"App\">\n          <Header />\n          <div className=\"TextColumn\">\n            <p>A fully decentralised crowdfunding platform on the Ethereum blockchain.</p>\n          </div>\n          <div className=\"ImageColumn\">\n            <img src=\"ethereum-icon-2.jpg\" alt=\"App Logo\"/>\n          </div>\n          <div className=\"MetaMaskInfo\">\n            <h2>Connected to metasmask!</h2>\n            <p>Your connected account is: {this.state.accounts[0]}</p>\n          </div>\n          <div className=\"LeftButtonColumn\">\n            <button onClick={this.handleButton1Click}>Create Project</button>\n          </div>\n          <div className=\"rightButtonColumn\">\n            <button onClick={this.handleButton2Click}>View Projects</button>\n          </div>\n          <button onClick={this.getBalance}>Get Balance</button>\n        </div>\n      )\n    }\n    if (this.state.pagenumber === 1) {\n      return (\n        <div className=\"App\">\n          <Header />\n          <button onClick={this.handleButton1Click}>Back</button>\n          <CreateProjectPageBody createProject={this.createProject}\n                                 handleChange={this.handleChange}/>\n        </div>\n      );\n    }\n    return (\n      <div className=\"App\">\n        <Header />\n        <button onClick={this.handleButton2Click}>Back</button>\n        <ViewProjectsPageBody projectsMap={this.state.projectsMap}\n                              donateToProject={this.donateToProject}\n                              handleChange={this.handleChange}/>\n      </div>\n    )\n  }\n}\n\n\nexport default App;\n","/home/karl/ca400/2021-ca400-whelak26/src/client/src/reportWebVitals.js",[],["45","46"],"/home/karl/ca400/2021-ca400-whelak26/src/client/src/getWeb3.js",[],"/home/karl/ca400/2021-ca400-whelak26/src/client/src/components/Header.js",[],"/home/karl/ca400/2021-ca400-whelak26/src/client/src/components/Input.js",[],"/home/karl/ca400/2021-ca400-whelak26/src/client/src/components/CreateProjectPageBody.js",[],"/home/karl/ca400/2021-ca400-whelak26/src/client/src/components/ViewProjectsPageBody.js",[],"/home/karl/ca400/2021-ca400-whelak26/src/client/src/components/ViewProject.js",[],{"ruleId":"47","replacedBy":"48"},{"ruleId":"49","replacedBy":"50"},{"ruleId":"51","severity":1,"message":"52","line":94,"column":70,"nodeType":"53","messageId":"54","endLine":94,"endColumn":71},{"ruleId":"51","severity":1,"message":"52","line":113,"column":68,"nodeType":"53","messageId":"54","endLine":113,"endColumn":69},{"ruleId":"47","replacedBy":"55"},{"ruleId":"49","replacedBy":"56"},"no-native-reassign",["57"],"no-negated-in-lhs",["58"],"no-sequences","Unexpected use of comma operator.","SequenceExpression","unexpectedCommaExpression",["57"],["58"],"no-global-assign","no-unsafe-negation"]