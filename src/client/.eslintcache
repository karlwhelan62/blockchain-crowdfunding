[{"/home/karl/ca400/2021-ca400-whelak26/src/client/src/index.js":"1","/home/karl/ca400/2021-ca400-whelak26/src/client/src/App.js":"2","/home/karl/ca400/2021-ca400-whelak26/src/client/src/reportWebVitals.js":"3","/home/karl/ca400/2021-ca400-whelak26/src/client/src/getWeb3.js":"4","/home/karl/ca400/2021-ca400-whelak26/src/client/src/components/Header.js":"5","/home/karl/ca400/2021-ca400-whelak26/src/client/src/components/Input.js":"6","/home/karl/ca400/2021-ca400-whelak26/src/client/src/components/CreateProjectPageBody.js":"7","/home/karl/ca400/2021-ca400-whelak26/src/client/src/components/ViewProjectsPageBody.js":"8","/home/karl/ca400/2021-ca400-whelak26/src/client/src/components/ViewProject.js":"9","/home/karl/ca400/2021-ca400-whelak26/src/client/src/components/Navbar.js":"10","/home/karl/ca400/2021-ca400-whelak26/src/client/src/components/ToolTipIcon.js":"11"},{"size":484,"mtime":1611679254296,"results":"12","hashOfConfig":"13"},{"size":7480,"mtime":1613410553772,"results":"14","hashOfConfig":"13"},{"size":362,"mtime":1610367004634,"results":"15","hashOfConfig":"13"},{"size":1170,"mtime":1612378822238,"results":"16","hashOfConfig":"13"},{"size":944,"mtime":1613410553772,"results":"17","hashOfConfig":"13"},{"size":2098,"mtime":1613576435440,"results":"18","hashOfConfig":"13"},{"size":2432,"mtime":1613576527435,"results":"19","hashOfConfig":"13"},{"size":2000,"mtime":1612889400550,"results":"20","hashOfConfig":"13"},{"size":1441,"mtime":1611770063588,"results":"21","hashOfConfig":"13"},{"size":1238,"mtime":1613410553772,"results":"22","hashOfConfig":"13"},{"size":1097,"mtime":1613575975044,"results":"23","hashOfConfig":"13"},{"filePath":"24","messages":"25","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"26"},"lxoapa",{"filePath":"27","messages":"28","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"29","usedDeprecatedRules":"26"},{"filePath":"30","messages":"31","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"32"},{"filePath":"33","messages":"34","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"26"},{"filePath":"35","messages":"36","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"26"},{"filePath":"37","messages":"38","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"39","messages":"40","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"41","messages":"42","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"26"},{"filePath":"43","messages":"44","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"26"},{"filePath":"45","messages":"46","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"26"},{"filePath":"47","messages":"48","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"26"},"/home/karl/ca400/2021-ca400-whelak26/src/client/src/index.js",[],["49","50"],"/home/karl/ca400/2021-ca400-whelak26/src/client/src/App.js",["51","52"],"import React, { Component } from \"react\";\nimport Projects from './contract/Projects.json'\nimport getWeb3 from \"./getWeb3\"\nimport Header from \"./components/Header\"\nimport CreateProjectPageBody from \"./components/CreateProjectPageBody\"\nimport ViewProjectsPageBody from \"./components/ViewProjectsPageBody\"\n\nimport \"./App.css\";\n\n// instantiate web3 + contracts instants\nclass App extends Component {\n  constructor() {\n    super()\n    this.handlePageChange = this.handlePageChange.bind(this)\n    this.handleBurgerMenuClick = this.handleBurgerMenuClick.bind(this)\n    this.createProject = this.createProject.bind(this)\n    this.handleChange = this.handleChange.bind(this)\n    this.retreiveProjects = this.retreiveProjects.bind(this)\n    this.donateToProject = this.donateToProject.bind(this)\n    this.getBalance = this.getBalance.bind(this)\n    this.state = {currentPage: 'Home',\n                  burgerMenuClicked: false,\n                  projectsMap: null,\n                  web3: null,\n                  accounts:null,\n                  contracts:null,\n                  donationAmount: null,\n                  projectName: \"\",\n                  projectDescription: \"\",\n                  projectVideoLink: \"\",\n                  projectFundingGoal: 0,\n                  projectLength: 0,\n                  willShowLoader: false};\n  }\n\n  // executed once when the app loads\n  componentDidMount = async () => {\n    try {\n      const web3 = await getWeb3();\n      const accounts = await web3.eth.getAccounts();\n\n      const networkId = await web3.eth.net.getId();\n      const deployedNetwork =  Projects.networks[networkId];\n      const instance = new web3.eth.Contract(\n        Projects.abi,\n        deployedNetwork && deployedNetwork.address,\n      );\n\n      this.setState({ web3, accounts, contract: instance });\n    } catch(error) {\n      // catch errors\n      alert(\n        'Failed to load web3, accounts, or contract. check console for details',\n      );\n      console.error(error);\n    }\n  };\n\n  retreiveProjects = async () => {\n    let x =  await this.state.contract.methods.returnProjects().call()\n    for(let i = 0; i < x.length; i ++) {\n      x[i].name = this.state.web3.utils.hexToAscii(x[i].name).replace(/\\0/g, '')\n      x[i].description = this.state.web3.utils.hexToAscii(x[i].description).replace(/\\0/g, '')\n      x[i].videoLink = this.state.web3.utils.hexToAscii(x[i].videoLink).replace(/\\0/g, '')\n      x[i].fundingGoal = this.state.web3.utils.fromWei(x[i].fundingGoal, 'ether')\n      x[i].amountRaised = this.state.web3.utils.fromWei(x[i].amountRaised, 'ether')\n      x[i].projectEndTime = new Date(x[i].projectEndTime * 1000).toLocaleDateString()\n      x[i].key = i\n    }\n\n    this.setState({\n      projectsMap: x\n    })\n  }\n\n  createProject(event) {\n    event.preventDefault()\n    let convertToDate = new Date(this.state.projectLength)\n\n    try {\n\n      let weiValue = this.state.web3.utils.toWei(this.state.projectFundingGoal, 'ether')\n      let videoId =  this.state.projectVideoLink.replace('https://youtu.be/', '')\n\n      this.state.contract.methods.createProject(\n        this.state.web3.utils.asciiToHex(this.state.projectName),\n        this.state.web3.utils.asciiToHex(this.state.projectDescription),\n        this.state.web3.utils.asciiToHex(videoId),\n        weiValue,\n        Math.floor(convertToDate.valueOf() / 1000)).send(\n          {from: this.state.accounts[0]})\n          .then(this.setState({willShowLoader: true}))\n          .then(f => this.setState({willShowLoader: false}))\n          .then(f => alert(\"Project Creation Successful\"))\n          .catch(err => (\n            alert(\"Project Creation Failed! See console for details\"),\n            console.log(err),\n            this.setState({willShowLoader: false})\n          ))\n    } catch(error) {\n      alert(\"project Creation Failed! See console for details\")\n      console.log(error)\n    }\n  }\n\n  donateToProject = async (projectKey) => {\n    try {\n\n      let weiValue = this.state.web3.utils.toWei(this.state.donationAmount, 'ether')\n\n      await this.state.contract.methods.donateToProject(projectKey).send(\n        {from: this.state.accounts[0],\n         value: weiValue})\n        .then(this.setState({willShowLoader: true}))\n        .then(f => this.setState({willShowLoader: false}))\n        .then(f => alert(\"Project Donation Successful\"))\n        .catch(err => (\n          alert(\"Project Doantion Failed! See console for details\"),\n          console.log(err),\n          this.setState({willShowLoader: false})\n        ))\n    } catch(error) {\n      alert(\"Project Donation Failed! See console for details\")\n      console.log(error)\n    }\n\n    this.setState({\n      projectsMap: null\n    })\n    this.retreiveProjects()\n  }\n\n  handlePageChange(newPage) {\n    if (newPage === \"ViewProject\") {\n      this.retreiveProjects()\n    }\n    this.setState({\n      currentPage: newPage\n    })\n  }\n\n  handleBurgerMenuClick(bool) {\n    this.setState({\n      burgerMenuClicked: bool\n    })\n  }\n\n  handleChange(event) {\n    const {name, value} = event.target\n    this.setState({\n      [name]: value\n    })\n  }\n\n  getBalance() {\n    this.state.contract.methods.getContractBalance().call().then(f => console.log(f))\n  }\n\n  render() {\n\n    if (!this.state.web3) {\n      return <div data-testid=\"NoWeb3\" className=\"App\">\n              <h2>Loading Web3, accounts, and contract......</h2>\n             </div>;\n    }\n    if (this.state.currentPage === 'Home') {\n      return (\n        <div data-testid=\"Homepage\" className=\"App\">\n          <Header handlePageChange={this.handlePageChange}\n                  handleBurgerMenuClick={this.handleBurgerMenuClick}\n                  currentPage={this.state.currentPage}\n                  burgerMenuClicked={this.state.burgerMenuClicked}/>\n          <div className=\"TextColumn\">\n            <p>A fully decentralised crowdfunding platform on the Ethereum blockchain.</p>\n          </div>\n          <div className=\"ImageColumn\">\n            <img src=\"ethereum-icon-2.jpg\" alt=\"App Logo\"/>\n          </div>\n          <div className=\"MetaMaskInfo\">\n            <h2>Connected to blockchain!</h2>\n            <p>Your connected account is: {this.state.accounts[0]}</p>\n          </div>\n          <button onClick={this.getBalance}>Get Balance</button>\n        </div>\n      )\n    }\n    if (this.state.currentPage === \"CreateProject\") {\n      return (\n        <div className=\"App\">\n          <Header handlePageChange={this.handlePageChange}\n                  handleBurgerMenuClick={this.handleBurgerMenuClick}\n                  currentPage={this.state.currentPage}\n                  burgerMenuClicked={this.state.burgerMenuClicked}/>\n          <CreateProjectPageBody createProject={this.createProject}\n                                 handleChange={this.handleChange}\n                                 willShowLoader={this.state.willShowLoader}/>\n        </div>\n      );\n    }\n    return (\n      <div className=\"App\">\n        <Header handlePageChange={this.handlePageChange}\n                handleBurgerMenuClick={this.handleBurgerMenuClick}\n                currentPage={this.state.currentPage}\n                burgerMenuClicked={this.state.burgerMenuClicked}/>\n        <ViewProjectsPageBody projectsMap={this.state.projectsMap}\n                              donateToProject={this.donateToProject}\n                              handleChange={this.handleChange}\n                              willShowLoader={this.state.willShowLoader}/>\n      </div>\n    )\n  }\n}\n\n\nexport default App;\n","/home/karl/ca400/2021-ca400-whelak26/src/client/src/reportWebVitals.js",[],["53","54"],"/home/karl/ca400/2021-ca400-whelak26/src/client/src/getWeb3.js",[],"/home/karl/ca400/2021-ca400-whelak26/src/client/src/components/Header.js",[],"/home/karl/ca400/2021-ca400-whelak26/src/client/src/components/Input.js",[],"/home/karl/ca400/2021-ca400-whelak26/src/client/src/components/CreateProjectPageBody.js",[],"/home/karl/ca400/2021-ca400-whelak26/src/client/src/components/ViewProjectsPageBody.js",[],"/home/karl/ca400/2021-ca400-whelak26/src/client/src/components/ViewProject.js",[],"/home/karl/ca400/2021-ca400-whelak26/src/client/src/components/Navbar.js",[],"/home/karl/ca400/2021-ca400-whelak26/src/client/src/components/ToolTipIcon.js",[],{"ruleId":"55","replacedBy":"56"},{"ruleId":"57","replacedBy":"58"},{"ruleId":"59","severity":1,"message":"60","line":96,"column":70,"nodeType":"61","messageId":"62","endLine":96,"endColumn":71},{"ruleId":"59","severity":1,"message":"60","line":118,"column":68,"nodeType":"61","messageId":"62","endLine":118,"endColumn":69},{"ruleId":"55","replacedBy":"63"},{"ruleId":"57","replacedBy":"64"},"no-native-reassign",["65"],"no-negated-in-lhs",["66"],"no-sequences","Unexpected use of comma operator.","SequenceExpression","unexpectedCommaExpression",["65"],["66"],"no-global-assign","no-unsafe-negation"]